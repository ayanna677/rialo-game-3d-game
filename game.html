<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Subway Surfer — HTML/CSS/JS</title>
  <style>
    :root{
      --width:360px; --height:640px;
      --lane-count:3;
      --bg:#0b6b6b;
      --accent:#ffd700;
    }
    *{box-sizing:border-box}
    body{display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:linear-gradient(#056,#012);font-family:Inter,system-ui,Arial;color:#fff}

    /* Game container */
    .screen{
      width:var(--width);height:var(--height);background:linear-gradient(#6cc, #027);border-radius:14px;overflow:hidden;position:relative;box-shadow:0 20px 40px rgba(0,0,0,0.6);
    }

    /* Track & lanes */
    .track{position:absolute;inset:0;display:block}
    .ground{position:absolute;left:0;right:0;bottom:0;height:180px;background:linear-gradient(180deg,#3a3a3a 0,#222 100%);border-top-left-radius:20px;border-top-right-radius:20px;overflow:hidden}
    .rails{position:absolute;left:0;right:0;top:20px;height:100%;pointer-events:none}
    .lane{position:absolute;top:0;bottom:0;width:calc(100% / var(--lane-count));border-left:2px solid rgba(255,255,255,0.06);border-right:2px solid rgba(0,0,0,0.06)}

    /* Player */
    .player{position:absolute;bottom:120px;width:64px;height:64px;left:50%;transform:translateX(-50%);display:flex;align-items:center;justify-content:center;pointer-events:none}
    .player .body{width:56px;height:56px;background:linear-gradient(180deg,#ff6,#f80);border-radius:12px;box-shadow:0 8px 12px rgba(0,0,0,0.35);display:flex;align-items:center;justify-content:center}
    .player .cap{position:absolute;top:-8px;left:8px;width:40px;height:16px;background:#111;border-radius:6px}

    /* Obstacles & coins */
    .entity{position:absolute;bottom:0;width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center}
    .obstacle{background:linear-gradient(180deg,#444,#222);box-shadow:inset 0 -6px 6px rgba(0,0,0,0.4)}
    .coin{background:radial-gradient(circle at 30% 30%,#fff6a8,#ffd700);width:36px;height:36px;border-radius:50%;box-shadow:0 6px 10px rgba(0,0,0,0.35)}

    /* UI */
    .ui{position:absolute;left:10px;top:10px;font-weight:700;display:flex;gap:10px;align-items:center}
    .score{background:rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px}

    /* Controls for mobile */
    .controls{position:absolute;left:0;right:0;bottom:10px;display:flex;justify-content:center;gap:12px;pointer-events:none}
    .btn{pointer-events:auto;background:rgba(255,255,255,0.06);padding:12px;border-radius:10px;width:76px;text-align:center;font-weight:700}

    /* Start overlay */
    .overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.5));backdrop-filter:blur(4px);flex-direction:column;gap:14px}
    .big{font-size:22px;font-weight:800}
    .small{font-size:14px;opacity:0.9}

    /* simple responsive */
    @media(min-width:700px){:root{--width:420px;--height:700px}}
  </style>
</head>
<body>
  <div class="screen" id="screen">
    <div class="track" id="track">
      <div class="rails" id="rails"></div>
      <div class="ground"></div>

      <div class="player" id="player">
        <div class="cap"></div>
        <div class="body"></div>
      </div>
    </div>

    <div class="ui">
      <div class="score">Score: <span id="score">0</span></div>
      <div class="score">Coins: <span id="coins">0</span></div>
    </div>

    <div class="controls" id="controls" style="display:none">
      <div class="btn" id="leftBtn">◀</div>
      <div class="btn" id="jumpBtn">⤴</div>
      <div class="btn" id="rightBtn">▶</div>
    </div>

    <div class="overlay" id="overlay">
      <div class="big">Mini Subway Surfer</div>
      <div class="small">Use ← → or A / D to move lanes. Space to jump. On mobile swipe left/right or use buttons.</div>
      <button id="startBtn" class="btn" style="pointer-events:auto">Start</button>
    </div>
  </div>

  <script>
    // Simple endless runner with 3 lanes
    const screen = document.getElementById('screen');
    const rails = document.getElementById('rails');
    const playerEl = document.getElementById('player');
    const overlay = document.getElementById('overlay');
    const startBtn = document.getElementById('startBtn');
    const scoreEl = document.getElementById('score');
    const coinsEl = document.getElementById('coins');
    const controls = document.getElementById('controls');
    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    const jumpBtn = document.getElementById('jumpBtn');

    const LANE_COUNT = 3;
    const WIDTH = screen.clientWidth;
    const laneWidth = WIDTH / LANE_COUNT;

    // draw lane divs
    for(let i=0;i<LANE_COUNT;i++){
      const d = document.createElement('div');
      d.className='lane';
      d.style.left = (i*(100/LANE_COUNT))+'%';
      d.style.width = (100/LANE_COUNT)+'%';
      rails.appendChild(d);
    }

    // Game state
    let lane = 1; // 0..2
    let targetLane = 1;
    let x = laneToX(lane);
    let vy = 0;
    let y = 0; // jump offset
    let gravity = 0.0018; // px per ms^2
    let jumpVel = 0.6; // initial vy

    let entities = []; // obstacles and coins
    let speed = 0.18; // px per ms (vertical movement)
    let score = 0;
    let coins = 0;
    let running = false;
    let lastTime = null;
    let spawnTimer = 0;
    let spawnInterval = 900; // ms

    // responsive show controls on small screens
    function checkMobile(){
      if(window.innerWidth <= 700){controls.style.display='flex'} else controls.style.display='none';
    }
    checkMobile(); window.addEventListener('resize', checkMobile);

    // helpers
    function laneToX(l){
      // center of lane in px relative to track left
      return l*laneWidth + laneWidth/2 - 32; // player width/2
    }

    function createEntity(type, laneIdx){
      const el = document.createElement('div');
      el.className='entity '+type;
      el.style.left = (laneIdx*laneWidth + (laneWidth-56)/2) + 'px';
      el.style.bottom = '-80px';
      if(type==='coin'){
        el.innerHTML = '<div class="coin"></div>';
        el.dataset.type='coin';
      } else {
        el.classList.add('obstacle');
        el.dataset.type='obstacle';
      }
      screen.appendChild(el);
      return {el, lane:laneIdx, y:-80, type:el.dataset.type};
    }

    function spawnRandom(){
      const r = Math.random();
      if(r<0.6){ // obstacle
        const lane = Math.floor(Math.random()*LANE_COUNT);
        entities.push(createEntity('box', lane));
      } else { // coin
        const lane = Math.floor(Math.random()*LANE_COUNT);
        entities.push(createEntity('coinWrap', lane));
      }
    }

    // Input
    document.addEventListener('keydown', e=>{
      if(!running) return;
      if(e.key==='ArrowLeft' || e.key==='a' || e.key==='A'){moveLeft()}
      if(e.key==='ArrowRight' || e.key==='d' || e.key==='D'){moveRight()}
      if(e.code==='Space'){jump()}
    });
    leftBtn.addEventListener('click', ()=>{moveLeft()});
    rightBtn.addEventListener('click', ()=>{moveRight()});
    jumpBtn.addEventListener('click', ()=>{jump()});

    // Touch swipe
    let touchStartX = null;
    screen.addEventListener('touchstart', e=>{touchStartX = e.changedTouches[0].clientX});
    screen.addEventListener('touchend', e=>{
      if(!running) return;
      const dx = e.changedTouches[0].clientX - touchStartX;
      if(Math.abs(dx) > 30){ if(dx>0) moveRight(); else moveLeft(); }
      else jump();
    });

    function moveLeft(){ targetLane = Math.max(0, targetLane-1) }
    function moveRight(){ targetLane = Math.min(LANE_COUNT-1, targetLane+1) }
    function jump(){ if(y===0){ vy = -jumpVel; y = 0.1 } }

    // Game loop
    function gameLoop(ts){
      if(!lastTime) lastTime = ts;
      const dt = ts - lastTime; lastTime = ts;
      if(running){
        // move player toward target lane smoothly
        const tx = laneToX(targetLane);
        x += (tx - x) * Math.min(1, 0.02*dt);
        playerEl.style.left = x + 'px';

        // jump physics
        if(y> -999){
          vy += gravity * dt;
          y += vy * dt;
          if(y>0){ y=0; vy=0; }
          playerEl.style.transform = `translateX(-50%) translateY(${ -y }px)`;
        }

        // spawn
        spawnTimer += dt;
        if(spawnTimer > spawnInterval){ spawnTimer = 0; spawnInterval = 600 + Math.random()*800; spawnRandom(); }

        // move entities
        for(let i=entities.length-1;i>=0;i--){
          let en = entities[i];
          en.y += speed * dt * 100; // scale so feel okay
          en.el.style.bottom = en.y + 'px';

          // collision? entity approx center with player
          // player's vertical pos approx 120 + y
          const playerBottom = 120 + y;
          if(en.y + 30 > playerBottom - 30 && en.y < playerBottom + 60 && en.lane === targetLane){
            if(en.type==='obstacle'){
              endGame(); return; }
            if(en.type==='coin'){
              // coin collected
              coins += 1; coinsEl.textContent = coins; score += 20; scoreEl.textContent = score;
              en.el.remove(); entities.splice(i,1); continue;
            }
          }

          // passed the player -> award score and remove
          if(en.y > screen.clientHeight + 100){
            score += (en.type==='coin')?10:30;
            scoreEl.textContent = score;
            en.el.remove(); entities.splice(i,1);
          }
        }

        // gradually increase speed
        speed += 0.000005 * dt; // very small
        // increase score over time
        score += Math.floor(0.01 * dt);
        scoreEl.textContent = score;
      }
      requestAnimationFrame(gameLoop);
    }

    function startGame(){
      // reset
      entities.forEach(e=>e.el.remove()); entities = [];
      lane = 1; targetLane = 1; x = laneToX(lane);
      playerEl.style.left = x + 'px'; playerEl.style.transform='translateX(-50%)';
      vy=0; y=0; speed=0.18; score=0; coins=0; scoreEl.textContent='0'; coinsEl.textContent='0'; spawnTimer=0; spawnInterval=900;
      running = true; overlay.style.display='none'; lastTime = null;
    }

    function endGame(){ running = false; overlay.style.display='flex'; overlay.innerHTML = `<div class="big">Game Over</div><div class="small">Score: ${score} • Coins: ${coins}</div><button id="startBtn2" class="btn" style="pointer-events:auto">Restart</button>`;
      document.getElementById('startBtn2').addEventListener('click', ()=>{ overlay.innerHTML = ''; overlay.appendChild(startBtn); overlay.appendChild(document.createElement('div')); location.reload(); });
    }

    // wire start
    startBtn.addEventListener('click', ()=>{ overlay.style.display='none'; startGame(); });

    // init player pos
    x = laneToX(lane);
    playerEl.style.left = x + 'px';

    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>
